
(function(c){var b=c.getCharWidthsArray=function(r,t){if(!t){t={}}var h=t.widths?t.widths:this.internal.getFont().metadata.Unicode.widths,q=h.fof?h.fof:1,m=t.kerning?t.kerning:this.internal.getFont().metadata.Unicode.kerning,o=m.fof?m.fof:1;var k,j,n,p=0,s=h[0]||q,g=[];for(k=0,j=r.length;k<j;k++){n=r.charCodeAt(k);g.push((h[n]||s)/q+(m[n]&&m[n][p]||0)/o);p=n}return g};var e=function(j){var h=j.length,g=0;while(h){h--;g+=j[h]}return g};var a=c.getStringUnitWidth=function(h,g){return e(b.call(this,h,g))};var d=function(g,n,h,j){var q=[];var m=0,k=g.length,p=0;while(m!==k&&p+n[m]<h){p+=n[m];m++}q.push(g.slice(0,m));var o=m;p=0;while(m!==k){if(p+n[m]>j){q.push(g.slice(o,m));p=0;o=m}p+=n[m];m++}if(o!==m){q.push(g.slice(o,m))}return q};var f=function(p,z,m){if(!m){m={}}var o=[],h=[o],k=m.textIndent||0,r=0,s=0,x,u,q=p.split(" "),B=b(" ",m)[0],w,t,A,g;if(m.lineIndent===-1){g=q[0].length+2}else{g=m.lineIndent||0}if(g){var y=Array(g).join(" "),n=[];q.map(function(i){i=i.split(/\s*\n/);if(i.length>1){n=n.concat(i.map(function(C,l){return(l&&C.length?"\n":"")+C}))}else{n.push(i[0])}});q=n;g=a(y,m)}for(w=0,t=q.length;w<t;w++){var j=0;x=q[w];if(g&&x[0]=="\n"){x=x.substr(1);j=1}u=b(x,m);s=e(u);if(k+r+s>z||j){if(s>z){A=d(x,u,z-(k+r),z);o.push(A.shift());o=[A.pop()];while(A.length){h.push([A.shift()])}s=e(u.slice(x.length-o[0].length))}else{o=[x]}h.push(o);k=s+g;r=B}else{o.push(x);k+=r+s;r=B}}if(g){var v=function(l,i){return(i?y:"")+l.join(" ")}}else{var v=function(i){return i.join(" ")}}return h.map(v)};c.splitTextToSize=function(q,m,r){if(!r){r={}}var h=r.fontSize||this.internal.getFontSize(),g=(function(l){var t={0:1},i={};if(!l.widths||!l.kerning){var u=this.internal.getFont(l.fontName,l.fontStyle),s="Unicode";if(u.metadata[s]){return{widths:u.metadata[s].widths||t,kerning:u.metadata[s].kerning||i}}}else{return{widths:l.widths,kerning:l.kerning}}return{widths:t,kerning:i}}).call(this,r);var p;if(Array.isArray(q)){p=q}else{p=q.split(/\r?\n/)}var j=1*this.internal.scaleFactor*m/h;g.textIndent=r.textIndent?r.textIndent*1*this.internal.scaleFactor/h:0;g.lineIndent=r.lineIndent;var o,n,k=[];for(o=0,n=p.length;o<n;o++){k=k.concat(f(p[o],j,g))}return k}})(jsPDF.API);